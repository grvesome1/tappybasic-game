<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Avatar Studio</title>
  <style>
    :root{color-scheme:dark;}
    html,body{height:100%;margin:0;background:#07090d;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;}
    body{padding:16px;box-sizing:border-box;}
    .wrap{max-width:980px;margin:0 auto;}
    .top{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;}
    h1{margin:0;font-size:18px;letter-spacing:0.2px;}
    .muted{color:rgba(255,255,255,0.62);font-size:12px;}
    .card{margin-top:12px;border:1px solid rgba(255,255,255,0.10);border-radius:18px;background:rgba(0,0,0,0.45);padding:14px;}
    .grid{display:grid;grid-template-columns:220px 1fr;gap:12px;align-items:start;}
    @media (max-width:860px){.grid{grid-template-columns:1fr;}}

    .avatarCard{border:1px solid rgba(255,255,255,0.10);border-radius:16px;background:rgba(2,6,23,0.55);padding:12px;}
    .avatarSvg{width:100%;height:auto;border-radius:14px;border:1px solid rgba(255,255,255,0.08);background:rgba(0,0,0,0.25);}

    .kv{display:grid;grid-template-columns:140px 1fr;gap:6px 10px;margin-top:10px;font-size:12px;}
    .k{color:rgba(255,255,255,0.55);} .v{color:rgba(255,255,255,0.86);} 

    label{display:block;color:rgba(255,255,255,0.62);font-size:12px;margin-bottom:4px;}
    select{width:100%;padding:10px 10px;border-radius:14px;border:1px solid rgba(255,255,255,0.12);background:rgba(0,0,0,0.35);color:rgba(255,255,255,0.92);}

    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;}
    button{appearance:none;border:1px solid rgba(255,255,255,0.14);background:rgba(34,211,238,0.18);color:#eaffff;padding:9px 12px;border-radius:14px;font-weight:650;cursor:pointer;}
    button.secondary{background:rgba(255,255,255,0.08);}

    a{color:rgba(34,211,238,0.92);text-decoration:none;}
    a:hover{text-decoration:underline;}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div>
        <h1>Avatar Studio</h1>
        <div class="muted">Uses the same local profile keys as the dashboard. Saving still honors PRO + level edit limits.</div>
      <!doctype html>
      <html lang="en">
      <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Avatar Studio (Disabled)</title>
        <meta http-equiv="refresh" content="0; url=/" />
        <style>
          :root{color-scheme:dark;}
          html,body{height:100%;margin:0;background:#07090d;color:rgba(255,255,255,0.86);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;}
          body{display:flex;align-items:center;justify-content:center;padding:24px;box-sizing:border-box;}
          .card{max-width:760px;border:1px solid rgba(255,255,255,0.10);border-radius:16px;background:rgba(0,0,0,0.45);padding:16px;}
          .muted{color:rgba(255,255,255,0.62);font-size:12px;margin-top:6px;line-height:1.4;}
          a{color:rgba(34,211,238,0.92);text-decoration:none;}
          a:hover{text-decoration:underline;}
        </style>
      </head>
      <body>
        <div class="card">
          <div><strong>Avatar Studio is embedded in the dashboard.</strong></div>
          <div class="muted">
            The arcade runs as a single dashboard URL; standalone pages are disabled.
            Redirecting to <a href="/">/</a>â€¦
          </div>
        </div>

        <script>
          // Hard redirect (in case meta refresh is blocked)
          try { window.location.replace('/'); } catch {}
        </script>
      </body>
      </html>
      }

      const dna = { bg: avBg.value, acc: avAcc.value, eyes: avEyes.value, mouth: avMouth.value };
      // Simulated tx: update DNA and consume 1 edit.
      setAvatarDNA(dna);
      setInt(K.avatarLast, lvl);
      render();
      alert('Avatar updated (simulated tx).');
    }

    document.getElementById('btnSave').addEventListener('click', saveAvatar);
    document.getElementById('btnOpenWallet').addEventListener('click', () => { window.location.href = '/wallet'; });

    [avBg,avAcc,avEyes,avMouth].forEach(el => el.addEventListener('change', () => {
      const dna = getAvatarDNA();
      dna.bg = avBg.value;
      dna.acc = avAcc.value;
      dna.eyes = avEyes.value;
      dna.mouth = avMouth.value;
      setAvatarDNA(dna);
      render();
    }));

    render();
  </script>
</body>
</html>
